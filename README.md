Here are the full codes of implementing EB-NPC as introduced in the paper: A Spatially Structured Empirical Bayes Framework for Traffic Safety Countermeasure Evaluation

While codes are complete, the data uploaded here are only partial due to the privacy policy of the City of Edmonton (CoE).

In the python scripts, these two files are used frequently:  and "0_sp_lookups.pkl":
  "0_paths_with_legs_ALL_combined.jsonl.gz": is the "graph" of the CoE's road network built by the road network shapefile of CoE, python libraries "networkx", "shapely" and "geopandas"
  "0_sp_lookups.pkl": cotains the shortest path and intersection information for each pair of points (DFS sites and nonDFS sites)
However, these files exceed the file size limit, so they are allowed to be uploaded here.

